[gd_scene load_steps=38 format=4 uid="uid://641es3coh6tl"]

[ext_resource type="Script" uid="uid://cgdpkkfvspe6f" path="res://Scripts/Camera/CameraController.cs" id="1_fri8c"]
[ext_resource type="Shader" uid="uid://j67wbxdm5fle" path="res://Scripts/Shader/blur.gdshader" id="2_7a47q"]
[ext_resource type="Texture2D" uid="uid://b242eyhweiko7" path="res://Sprites/Environment/FactoryWall_Tileset.png" id="3_i3say"]
[ext_resource type="PackedScene" uid="uid://bl57h6bp50oo2" path="res://Scenes/Player/Player.tscn" id="4_23gfh"]
[ext_resource type="PackedScene" uid="uid://ddti75ydnggyo" path="res://Scenes/Environment/FactoryBreakawayFloor.tscn" id="5_fri8c"]
[ext_resource type="PackedScene" uid="uid://3kfeb17b550a" path="res://Scenes/Level/DoorArea2D.tscn" id="6_oci5r"]
[ext_resource type="PackedScene" uid="uid://c2lbnb23jrpgt" path="res://Scenes/UI/ScreenFade.tscn" id="7_bvo2d"]
[ext_resource type="PackedScene" uid="uid://d30vj7qfwl6uj" path="res://Scenes/UI/CollectionOverlay.tscn" id="8_wwd5y"]
[ext_resource type="AudioStream" uid="uid://c4eefii077p5q" path="res://Audio/Music/Persona 3 OST - Tartarus Block 1 Extended.mp3" id="9_lg0cl"]
[ext_resource type="PackedScene" uid="uid://dajr1nqbjbtyb" path="res://Scenes/Enemy/MechMosquito.tscn" id="10_i3say"]
[ext_resource type="PackedScene" uid="uid://ndjhcd7ysgc1" path="res://Scenes/Enemy/TechTick.tscn" id="11_23gfh"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_thak2"]
size = Vector2(5, 2498)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ow07d"]
shader = ExtResource("2_7a47q")
shader_parameter/blur_power = 0.08
shader_parameter/iterations = 100.0

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_alaxt"]
polygon = PackedVector2Array(191.736, -64.4628, 191.797, 191.797, -62, 191, -64, -64)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_pvlks"]
polygon = PackedVector2Array(191.736, -64.4628, 191.797, 191.797, -62, 191, -64, -64)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_ojjet"]
polygon = PackedVector2Array(64, -64, 64.7713, 191.615, -62, 191, -64, -64)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_3iqsu"]
polygon = PackedVector2Array(-64, -64, 191.615, -64.7713, 191, 62, -64, 64)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_3u35w"]
polygon = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_i3say"]
texture = ExtResource("3_i3say")
texture_region_size = Vector2i(128, 128)
0:0/size_in_atlas = Vector2i(2, 2)
0:0/0 = 0
0:0/0/texture_origin = Vector2i(-64, -64)
0:0/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_alaxt")
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 192.089, -64.0297, 192.089, 191.909, -63.8498, 191.909)
2:0/size_in_atlas = Vector2i(2, 2)
2:0/0 = 0
2:0/0/texture_origin = Vector2i(-64, -64)
2:0/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_pvlks")
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 192.089, -64.0297, 192.089, 191.909, -63.8498, 191.909)
4:0/size_in_atlas = Vector2i(1, 2)
4:0/0 = 0
4:0/0/texture_origin = Vector2i(0, -64)
4:0/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_ojjet")
4:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 63.8498, 192.089, -63.8498, 191.909)
5:1/0 = 0
5:1/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_3u35w")
5:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 64, -64, 64, 64, -64, 64)
5:0/size_in_atlas = Vector2i(2, 1)
5:0/0 = 0
5:0/0/texture_origin = Vector2i(-64, 0)
5:0/0/occlusion_layer_0/polygon_0/polygon = SubResource("OccluderPolygon2D_3iqsu")
5:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -64, 191.816, -64.0448, 191.816, 64.3634, -64, 64)
0:4/size_in_atlas = Vector2i(1, 2)
0:4/0 = 0
0:4/0/texture_origin = Vector2i(0, -64)
4:8/0 = 0
4:8/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, 32.0355, 64, 32.0355, 64, 64, -64, 64)
5:8/0 = 0
5:8/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, 32.0355, 64, 32.0355, 64, 64, -64, 64)
6:8/0 = 0
6:8/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, 32.0355, 64, 32.0355, 64, 64, -64, 64)
2:8/0 = 0
3:8/0 = 0
3:7/0 = 0
2:7/0 = 0

[sub_resource type="TileSet" id="TileSet_rkax3"]
tile_size = Vector2i(128, 128)
occlusion_layer_0/light_mask = 1
physics_layer_0/collision_layer = 3
physics_layer_0/collision_mask = 3
sources/2 = SubResource("TileSetAtlasSource_i3say")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_23gfh"]
texture = ExtResource("3_i3say")
texture_region_size = Vector2i(128, 128)
0:2/0 = 0
1:3/0 = 0
2:2/0 = 0
3:2/0 = 0
2:3/0 = 0
3:3/0 = 0
4:2/0 = 0
4:3/0 = 0
5:3/0 = 0
5:2/0 = 0
0:6/0 = 0
0:6/0/z_index = 1
1:4/0 = 0
1:4/0/z_index = 1
1:5/0 = 0
1:5/0/z_index = 1
1:6/0 = 0
1:6/0/z_index = 1
2:4/0 = 0
2:4/0/z_index = 1
2:5/0 = 0
2:5/0/z_index = 1
3:5/0 = 0
3:5/0/z_index = 1
3:4/0 = 0
3:4/0/z_index = 1
4:4/0 = 0
4:5/0 = 0
6:5/0 = 0
5:5/0 = 0
5:4/0 = 0
6:4/0 = 0
4:6/0 = 0
4:6/0/z_index = 1
3:6/0 = 0
3:6/0/z_index = 1
2:6/0 = 0
2:6/0/z_index = 1
0:4/size_in_atlas = Vector2i(1, 2)
0:4/0 = 0
0:4/0/texture_origin = Vector2i(0, -64)
4:7/0 = 0
5:7/0 = 0
3:7/0 = 0
2:7/0 = 0
2:8/0 = 0
3:8/0 = 0

[sub_resource type="TileSet" id="TileSet_v2olg"]
tile_size = Vector2i(128, 128)
sources/2 = SubResource("TileSetAtlasSource_23gfh")

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_nxacd"]
texture = ExtResource("3_i3say")
texture_region_size = Vector2i(128, 128)
6:7/0 = 0
6:7/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -27, 64, -26, 64, 64, -64, 64)
7:7/0 = 0
7:7/0/physics_layer_0/polygon_0/points = PackedVector2Array(-64, -27, 64, -26, 64, 64, -64, 64)

[sub_resource type="TileSet" id="TileSet_3vtev"]
tile_size = Vector2i(128, 128)
physics_layer_0/collision_layer = 4
physics_layer_0/collision_mask = 0
sources/0 = SubResource("TileSetAtlasSource_nxacd")

[sub_resource type="Gradient" id="Gradient_oci5r"]
offsets = PackedFloat32Array(0.36478, 1)
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_0xiy8"]
gradient = SubResource("Gradient_oci5r")
fill_from = Vector2(0, 1)
fill_to = Vector2(1, 1)

[sub_resource type="Gradient" id="Gradient_bvo2d"]
interpolation_mode = 2
offsets = PackedFloat32Array(0.798742, 1)
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_qqn31"]
gradient = SubResource("Gradient_bvo2d")
fill = 2
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(1, 1)

[sub_resource type="Gradient" id="Gradient_wwd5y"]
offsets = PackedFloat32Array(0.830189, 1)
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_23gfh"]
gradient = SubResource("Gradient_wwd5y")

[sub_resource type="Gradient" id="Gradient_lg0cl"]
offsets = PackedFloat32Array(0.0188679, 1)
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_nflet"]
gradient = SubResource("Gradient_lg0cl")
fill_from = Vector2(0, 0.5)
fill_to = Vector2(1, 0.495726)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gq3dw"]
size = Vector2(380.5, 27.125)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_i3say"]
size = Vector2(38, 255)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_23gfh"]
size = Vector2(35, 254.563)

[sub_resource type="Gradient" id="Gradient_thak2"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_2vm6y"]
gradient = SubResource("Gradient_thak2")

[node name="Room09" type="Node2D"]

[node name="Background Color" type="ColorRect" parent="."]
offset_left = -2231.0
offset_top = -1509.0
offset_right = 1359.0
offset_bottom = 3240.0
scale = Vector2(0.78, 0.835)
color = Color(0.147672, 0.147672, 0.147672, 1)

[node name="CharacterCamera" type="Camera2D" parent="."]
position = Vector2(1149, -472)
zoom = Vector2(0.75, 0.75)
script = ExtResource("1_fri8c")
playerPath = NodePath("../Player")
boundsPath = NodePath("../CameraBounds/CameraCollsion")
cameraYOffset = -200

[node name="CameraBounds" type="Area2D" parent="."]

[node name="CameraCollsion" type="CollisionShape2D" parent="CameraBounds"]
position = Vector2(-855.5, 533)
shape = SubResource("RectangleShape2D_thak2")

[node name="Background" type="Parallax2D" parent="."]
scroll_scale = Vector2(0.8, 0.8)

[node name="BackgroundBlur" type="ColorRect" parent="."]
visible = false
material = SubResource("ShaderMaterial_ow07d")
offset_left = -253.0
offset_top = -604.0
offset_right = 2147.0
offset_bottom = 1138.0
color = Color(1, 1, 1, 0)

[node name="BackDetail" type="TileMapLayer" parent="."]
tile_set = SubResource("TileSet_rkax3")

[node name="Player" parent="." instance=ExtResource("4_23gfh")]
position = Vector2(396, -109)
safe_margin = 1.0
WallJumpLockTime = 0.15
WallJumpForce = 1250.0
hasWalljump = true
hasDash = true
hasSword = true

[node name="MechMosquito" parent="." instance=ExtResource("10_i3say")]
position = Vector2(-761, 1965)

[node name="TechTick" parent="." instance=ExtResource("11_23gfh")]
position = Vector2(-936, 968)
Speed = 400.0
LeftLimitPath = NodePath("LeftLimit")
RightLimitPath = NodePath("RightLimit")

[node name="LeftLimit" type="Marker2D" parent="TechTick"]
position = Vector2(-878.667, -18.6667)

[node name="RightLimit" type="Marker2D" parent="TechTick"]
position = Vector2(634.667, -8)

[node name="MidTiles" type="Node2D" parent="."]

[node name="DetailBack" type="TileMapLayer" parent="MidTiles"]
tile_set = SubResource("TileSet_v2olg")

[node name="Ground" type="TileMapLayer" parent="MidTiles"]
tile_map_data = PackedByteArray("AAD+/wAAAgAFAAAAAAD8/wAAAgAFAAAAAAD6/wAAAgAFAAAAAAD4/wAAAgAFAAAAAAD2/wAAAgAFAAAAAAACAPz/AgACAAAAAAACAAAAAgACAAAAAAAAAAAAAgAFAAAAAADw/wgAAgAEAAAAAADy/wgAAgAFAAAAAAD0/wgAAgAFAAAAAAD2/wgAAgAFAAAAAAD4/wgAAgAFAAAAAAD6/wgAAgAFAAAAAAACAAIAAgAEAAAAAAACAAQAAgAEAAAAAAACAAYAAgAEAAAAAAACAAgAAgAEAAAAAAD8/wgAAgAFAAAAAAD9/wkAAgAEAAAAAAD9/wsAAgAEAAAAAAACAAoAAgAEAAAAAAACAAwAAgAEAAAAAAACABIAAgAFAAAAAAACAA4AAgACAAAAAAAAABIAAgAFAAAAAAD+/xIAAgAFAAAAAAD8/xIAAgAFAAAAAAD6/xIAAgAFAAAAAAD4/xIAAgAFAAAAAAD2/xIAAgAFAAAAAAD0/xIAAgAFAAAAAADy/xIAAgAFAAAAAADw/xIAAgAFAAAAAADv/xEAAgAEAAAAAADv/w8AAgAEAAAAAADv/w0AAgAEAAAAAADv/wsAAgAEAAAAAADv/wkAAgAEAAAAAADv/wcAAgAEAAAAAADv/wUAAgAEAAAAAADv/wMAAgAEAAAAAADv/wEAAgAEAAAAAADv////AgAEAAAAAADv//3/AgAEAAAAAADv//v/AgAEAAAAAAACAPr/AgAEAAAAAAD+//r/AgAEAAAAAADw//r/AgAEAAAAAADy//r/AgAFAAAAAAD0//r/AgAFAAAAAAD2//r/AgAFAAAAAAD4//r/AgAFAAAAAAD6//r/AgAFAAAAAAD8//r/AgAFAAAAAAACAPj/AgAEAAAAAADv//n/AgAEAAAAAADv//f/AgAEAAAAAADv//X/AgAEAAAAAAD1//X/AgAFAAAAAAD3//X/AgAFAAAAAAD5//X/AgAFAAAAAAD7//X/AgAFAAAAAAD9//X/AgAFAAAAAAD///X/AgAFAAAAAAABAPX/AgAFAAAAAAACAPb/AgAEAAAAAAADAAMAAgAEAAAAAAADAAUAAgAEAAAAAAADAAcAAgAEAAAAAAADAAkAAgAEAAAAAAADAAsAAgAEAAAAAAADAPn/AgAEAAAAAAADAPf/AgAEAAAAAAADAPX/AgAEAAAAAAACAPT/AgAFAAAAAAAAAPT/AgAFAAAAAAD+//T/AgAFAAAAAAD8//T/AgAFAAAAAAD6//T/AgAFAAAAAAD4//T/AgAFAAAAAAD2//T/AgAFAAAAAAD0//T/AgAFAAAAAAABABMAAgAFAAAAAAADABMAAgAFAAAAAAD//xMAAgAFAAAAAAD9/xMAAgAFAAAAAAD7/xMAAgAFAAAAAAD5/xMAAgAFAAAAAAD3/xMAAgAFAAAAAAD1/xMAAgAFAAAAAADz/xMAAgAFAAAAAADx/xMAAgAFAAAAAADv/xMAAgAFAAAAAADw/xAAAgAEAAAAAADw/w4AAgAEAAAAAADw/wwAAgAEAAAAAADw/woAAgAEAAAAAADx/wgAAgAFAAEAAAD1/wAAAgAFAAEAAAD1/wEAAgAEAAAAAAD1/wMAAgAEAAAAAADw/wYAAgAEAAAAAADw/wQAAgAEAAAAAADw/wIAAgAEAAAAAADw/wAAAgAEAAAAAADw//7/AgAEAAAAAADw//z/AgAEAAAAAADx//r/AgAFAAEAAADw//j/AgAEAAAAAADw//b/AgAEAAAAAADw//T/AgAEAAAAAAD0//X/AgAEAAAAAAD1//b/AgAEAAAAAAD0//f/AgAFAAEAAAADAPv/AgAFAAEAAAADAAIAAgAFAAEAAAADAA0AAgAFAAEAAAA=")
tile_set = SubResource("TileSet_rkax3")

[node name="Damage" type="TileMapLayer" parent="MidTiles"]
tile_set = SubResource("TileSet_3vtev")

[node name="DetailFront" type="TileMapLayer" parent="MidTiles"]
tile_set = SubResource("TileSet_v2olg")

[node name="Gears" type="Node2D" parent="."]

[node name="MidDropoff" type="Node2D" parent="."]

[node name="L" type="Sprite2D" parent="MidDropoff"]
position = Vector2(-2102.22, 517)
scale = Vector2(5.71178, 64.2074)
texture = SubResource("GradientTexture2D_0xiy8")

[node name="B" type="Sprite2D" parent="MidDropoff"]
position = Vector2(-768.19, 2436.01)
rotation = -1.5708
scale = Vector2(4.0394, 44.05)
texture = SubResource("GradientTexture2D_0xiy8")

[node name="TR" type="Sprite2D" parent="MidDropoff"]
position = Vector2(-408.973, -2250.75)
rotation = -1.5708
scale = Vector2(29.9377, 34.8535)
texture = SubResource("GradientTexture2D_qqn31")

[node name="BR" type="Sprite2D" parent="MidDropoff"]
position = Vector2(1412.05, 1024.33)
rotation = -1.5708
scale = Vector2(31.9893, 35.795)
texture = SubResource("GradientTexture2D_qqn31")

[node name="MR" type="Sprite2D" parent="MidDropoff"]
position = Vector2(1415.58, -1250.02)
rotation = -1.5708
scale = Vector2(31.3407, 35.7428)
texture = SubResource("GradientTexture2D_qqn31")

[node name="FactoryBreakawayFloor2" parent="." instance=ExtResource("5_fri8c")]
position = Vector2(0, 1024)
breakTime = 0.5
FloorID = "room_09_floor_02"

[node name="Sprite2D" type="Sprite2D" parent="FactoryBreakawayFloor2"]
position = Vector2(-869, 673)
rotation = -1.5708
scale = Vector2(21.0816, 43.6318)
texture = SubResource("GradientTexture2D_23gfh")

[node name="FactoryBreakawayFloor" parent="." instance=ExtResource("5_fri8c")]
position = Vector2(-1664, 0)
breakTime = 0.5
FloorID = "room_09_floor_01"

[node name="Sprite2D" type="Sprite2D" parent="FactoryBreakawayFloor"]
position = Vector2(779.01, 671.238)
rotation = -1.5708
scale = Vector2(21.0816, 43.6318)
texture = SubResource("GradientTexture2D_23gfh")

[node name="Checkpoints" type="Node2D" parent="."]

[node name="Foreground" type="Parallax2D" parent="."]
scroll_scale = Vector2(1.1, 1.1)
scroll_offset = Vector2(106, 174)

[node name="FrontDropoff" type="Node2D" parent="."]
visible = false

[node name="BottomPipeDropoff" type="Sprite2D" parent="FrontDropoff"]
position = Vector2(642, 1063.71)
rotation = -1.5708
scale = Vector2(1.9425, 3.36786)
texture = SubResource("GradientTexture2D_nflet")

[node name="TopExit" parent="." instance=ExtResource("6_oci5r")]
ConnectedRoom = "res://Levels/room_11.tscn"
PlayerJumpOnEnter = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="TopExit"]
position = Vector2(-1729, -1390)
shape = SubResource("RectangleShape2D_gq3dw")

[node name="MidRightExit" parent="." instance=ExtResource("6_oci5r")]
ConnectedRoom = "res://Levels/room_08.tscn"
PlayerPos = Vector2(-6261, -115)

[node name="CollisionShape2D" type="CollisionShape2D" parent="MidRightExit"]
position = Vector2(493, -128.5)
shape = SubResource("RectangleShape2D_i3say")

[node name="BotRightExit" parent="." instance=ExtResource("6_oci5r")]
ConnectedRoom = "res://Levels/room_10.tscn"
PlayerPos = Vector2(-150, -108)

[node name="CollisionShape2D" type="CollisionShape2D" parent="BotRightExit"]
position = Vector2(492.5, 2176.72)
shape = SubResource("RectangleShape2D_23gfh")

[node name="Lighting" type="Node2D" parent="."]

[node name="Door Light" type="PointLight2D" parent="Lighting"]
visible = false
position = Vector2(-286, -127)
rotation = 3.14159
scale = Vector2(10.4947, 4.11408)
shadow_enabled = true
texture = SubResource("GradientTexture2D_2vm6y")

[node name="ScreenFade" parent="." instance=ExtResource("7_bvo2d")]

[node name="CollectionOverlay" parent="." instance=ExtResource("8_wwd5y")]

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource("9_lg0cl")
volume_db = -10.306
